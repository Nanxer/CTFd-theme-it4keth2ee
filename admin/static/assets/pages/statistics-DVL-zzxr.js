import{$ as c,C as i,N as h}from"./main-DgtCNTQI.js";import{e as b}from"../echarts.common-B3K5MJ_F.js";const d={"#solves-graph":{data:()=>i.api.get_challenge_solve_statistics(),format:t=>{const o=t.data,a=[],r=[],f={};for(let l=0;l<o.length;l++)f[o[l].id]={name:o[l].name,solves:o[l].solves};const e=Object.keys(f).sort(function(l,n){return f[n].solves-f[l].solves});return c.each(e,function(l,n){a.push(f[n].name),r.push(f[n].solves)}),{title:{left:"center",text:"题目解决统计",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"axis",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 255, 255, 0.3)"}}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0,backgroundColor:"rgba(10, 10, 20, 0.3)"},xAxis:{name:"解决次数",nameLocation:"middle",nameGap:30,type:"value",axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{color:"#e0e0ff",fontSize:11},nameTextStyle:{color:"#00ffff",fontSize:12,fontWeight:"bold"},splitLine:{lineStyle:{color:"rgba(0, 255, 255, 0.2)",type:"dashed"}}},yAxis:{name:"题目名称",nameLocation:"middle",nameGap:80,type:"category",data:a,axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{interval:0,rotate:0,color:"#e0e0ff",fontSize:10},nameTextStyle:{color:"#00ffff",fontSize:12,fontWeight:"bold"}},dataZoom:[{show:!1,start:0,end:100},{type:"inside",yAxisIndex:0,show:!0,width:20,zoomLock:!0},{type:"slider",show:!0,right:"5%",width:20,start:0,end:100,backgroundColor:"rgba(10, 10, 20, 0.8)",dataBackground:{areaStyle:{color:"rgba(0, 255, 255, 0.3)"}},fillerColor:"rgba(0, 255, 255, 0.2)",borderColor:"#00ffff",textStyle:{color:"#e0e0ff"}}],series:[{name:"解决次数",type:"bar",barWidth:"60%",data:r,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"#00ffff"},{offset:.5,color:"#ff00ff"},{offset:1,color:"#ff0066"}]},borderColor:"#00ffff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.5)"},emphasis:{itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},label:{show:!0,position:"right",color:"#e0e0ff",fontSize:10,fontWeight:"bold",formatter:"{c}"}}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"}}},"#keys-pie-graph":{data:()=>i.api.get_submission_property_counts({column:"type"}),format:t=>{const o=t.data,a=o.correct,r=o.incorrect;return{title:{left:"center",text:"提交统计",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"item",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},legend:{orient:"vertical",top:"middle",right:10,data:["错误提交","正确提交"],textStyle:{color:"#e0e0ff",fontSize:12}},series:[{name:"提交统计",type:"pie",radius:["40%","60%"],center:["40%","50%"],avoidLabelOverlap:!0,label:{show:!0,position:"outside",formatter:`{b}
{c} ({d}%)`,color:"#e0e0ff",fontSize:11,fontWeight:"bold"},labelLine:{show:!0,length:20,length2:15,lineStyle:{color:"rgba(0, 255, 255, 0.5)"}},itemStyle:{borderColor:"#00ffff",borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.3)"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold",color:"#ffffff"},itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},data:[{value:r,name:"错误提交",itemStyle:{color:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"#ff0066"},{offset:1,color:"#cc0055"}]}}},{value:a,name:"正确提交",itemStyle:{color:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"#00ff88"},{offset:1,color:"#00cc66"}]}}}]}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"}}},"#categories-pie-graph":{data:()=>i.api.get_challenge_property_counts({column:"category"}),format:t=>{const o=t.data,a=[],r=[];for(let e in o)Object.hasOwn(o,e)&&(a.push(e),r.push(o[e]));for(let e=0;e<o.length;e++)a.push(o[e].category),r.push(o[e].count);let f={title:{left:"center",text:"题目分类",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"item",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},legend:{type:"plain",orient:"horizontal",top:"bottom",data:[],textStyle:{color:"#e0e0ff",fontSize:11}},series:[{name:"题目分类",type:"pie",radius:["40%","60%"],center:["50%","45%"],label:{show:!0,position:"outside",formatter:`{b}
{c} ({d}%)`,color:"#e0e0ff",fontSize:10,fontWeight:"bold"},labelLine:{show:!0,length:15,length2:10,lineStyle:{color:"rgba(0, 255, 255, 0.5)"}},itemStyle:{borderColor:"#00ffff",borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.3)"},emphasis:{label:{show:!0,fontSize:12,fontWeight:"bold",color:"#ffffff"},itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},data:[]}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"};return a.forEach((e,s)=>{f.legend.data.push(e),f.series[0].data.push({value:r[s],name:e,itemStyle:{color:h(e)}})}),f}},"#points-pie-graph":{data:()=>i.fetch("/api/v1/statistics/challenges/category?function=sum&target=value",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.json()}),format:t=>{const o=t.data,a=[],r=[];for(let e in o)Object.hasOwn(o,e)&&(a.push(e),r.push(o[e]));for(let e=0;e<o.length;e++)a.push(o[e].category),r.push(o[e].count);let f={title:{left:"center",text:"积分分布",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"item",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},legend:{type:"plain",orient:"horizontal",top:"bottom",data:[],textStyle:{color:"#e0e0ff",fontSize:11}},series:[{name:"积分分布",type:"pie",radius:["40%","60%"],center:["50%","45%"],label:{show:!0,position:"outside",formatter:`{b}
{c} ({d}%)`,color:"#e0e0ff",fontSize:10,fontWeight:"bold"},labelLine:{show:!0,length:15,length2:10,lineStyle:{color:"rgba(0, 255, 255, 0.5)"}},itemStyle:{borderColor:"#00ffff",borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.3)"},emphasis:{label:{show:!0,fontSize:12,fontWeight:"bold",color:"#ffffff"},itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},data:[]}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"};return a.forEach((e,s)=>{f.legend.data.push(e),f.series[0].data.push({value:r[s],name:e,itemStyle:{color:h(e)}})}),f}},"#solve-percentages-graph":{layout:t=>({title:"Solve Percentages per Challenge",xaxis:{title:"Challenge Name"},yaxis:{title:`Percentage of ${i.config.userMode.charAt(0).toUpperCase()+i.config.userMode.slice(1)} (%)`,range:[0,100]},annotations:t}),data:()=>i.api.get_challenge_solve_percentages(),format:t=>{const o=t.data,a=[],r=[];for(let e in o)a.push(o[e].name),r.push(o[e].percentage*100),o[e].name,o[e].percentage*100,Math.round(o[e].percentage*100)+"";return{title:{left:"center",text:"题目解决率",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"axis",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 255, 255, 0.3)"}}},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0,backgroundColor:"rgba(20, 20, 40, 0.3)"},xAxis:{type:"category",data:a,axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{color:"#e0e0ff",rotate:45,fontSize:10},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(0, 255, 255, 0.1)",type:"dashed"}}},yAxis:{type:"value",min:0,max:100,axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{color:"#e0e0ff",formatter:"{value}%",fontSize:10},splitLine:{show:!0,lineStyle:{color:"rgba(0, 255, 255, 0.1)",type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100,backgroundColor:"rgba(10, 10, 20, 0.8)",dataBackground:{lineStyle:{color:"#00ffff"},areaStyle:{color:"rgba(0, 255, 255, 0.2)"}},fillerColor:"rgba(0, 255, 255, 0.1)",borderColor:"#00ffff"}],series:[{name:"解决率",type:"bar",data:r,barWidth:"60%",itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#00ffff"},{offset:.5,color:"#ff00ff"},{offset:1,color:"#ff0066"}]},borderColor:"#00ffff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.5)"},emphasis:{itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},label:{show:!0,position:"top",color:"#ffffff",fontSize:10,fontWeight:"bold",formatter:"{c}%"}}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"}}},"#score-distribution-graph":{layout:t=>({title:"Score Distribution",xaxis:{title:"Score Bracket",showticklabels:!0,type:"category"},yaxis:{title:`Number of ${i.config.userMode.charAt(0).toUpperCase()+i.config.userMode.slice(1)}`},annotations:t}),data:()=>i.fetch("/api/v1/statistics/scores/distribution").then(function(t){return t.json()}),format:t=>{const o=t.data.brackets,a=[],r=[],f=[];for(let l in o)a.push(parseInt(l));a.sort((l,n)=>l-n);let e="<0";return a.map(l=>{r.push(`${e} - ${l}`),f.push(o[l]),e=l}),{title:{left:"center",text:"分数分布",textStyle:{color:"#00ffff",fontSize:18,fontWeight:"bold",textShadow:"0 0 10px #00ffff"}},tooltip:{trigger:"axis",backgroundColor:"rgba(10, 10, 20, 0.9)",borderColor:"#00ffff",borderWidth:1,textStyle:{color:"#e0e0ff",fontSize:12},axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 255, 255, 0.3)"}}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},iconStyle:{borderColor:"#00ffff",color:"#00ffff"},emphasis:{iconStyle:{borderColor:"#ff00ff",color:"#ff00ff"}}},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0,backgroundColor:"rgba(10, 10, 20, 0.3)"},xAxis:{name:"分数区间",nameGap:30,nameLocation:"middle",type:"category",data:r,axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{color:"#e0e0ff",fontSize:10,rotate:45,margin:8},nameTextStyle:{color:"#00ffff",fontSize:12,fontWeight:"bold"},splitLine:{show:!1}},yAxis:{name:`${i.config.userMode.charAt(0).toUpperCase()+i.config.userMode.slice(1)}数量`,nameGap:40,nameLocation:"middle",type:"value",axisLine:{lineStyle:{color:"#00ffff",width:2}},axisLabel:{color:"#e0e0ff",fontSize:11},nameTextStyle:{color:"#00ffff",fontSize:12,fontWeight:"bold"},splitLine:{lineStyle:{color:"rgba(0, 255, 255, 0.2)",type:"dashed"}}},dataZoom:[{show:!1,start:0,end:100},{type:"inside",show:!0,start:0,end:100,zoomLock:!0},{type:"slider",show:!0,bottom:"5%",height:20,start:0,end:100,backgroundColor:"rgba(10, 10, 20, 0.8)",dataBackground:{areaStyle:{color:"rgba(0, 255, 255, 0.3)"}},fillerColor:"rgba(0, 255, 255, 0.2)",borderColor:"#00ffff",textStyle:{color:"#e0e0ff"}}],series:[{name:"用户数量",type:"bar",barWidth:"70%",data:f,itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#00ffff"},{offset:.5,color:"#ff00ff"},{offset:1,color:"#ff0066"}]},borderColor:"#00ffff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 255, 255, 0.5)"},emphasis:{itemStyle:{shadowBlur:20,shadowColor:"rgba(255, 0, 255, 0.8)"}},label:{show:!0,position:"top",color:"#e0e0ff",fontSize:10,fontWeight:"bold",formatter:"{c}"}}],backgroundColor:"rgba(10, 10, 20, 0.5)",animation:!0,animationDuration:1e3,animationEasing:"cubicOut"}}}},u=()=>{for(let t in d){const o=d[t];c(t).empty();let r=b.init(document.querySelector(t));o.data().then(o.format).then(f=>{r.setOption(f),c(window).on("resize",function(){r!=null&&r!=null&&r.resize()})})}};function g(){for(let t in d){const o=d[t];let a=b.init(document.querySelector(t));o.data().then(o.format).then(r=>{a.setOption(r)})}}c(()=>{u(),setInterval(g,3e5)});
